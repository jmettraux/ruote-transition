#!/usr/bin/env ruby

$: << '../ruote/lib'
$: << './lib'

require 'optparse'

require 'openwfe/trans/xpdl'
require 'openwfe/trans/compiler'

require 'rubygems'
require 'openwfe/expool/parser'


if ARGV.length < 1
  puts
  puts "  bin/xpdl_to_owfe {xpdl_file_path}"
  puts
  puts "    attempts to turn an XPDL file to an OpenWFEru process definition"
  puts
  exit 1
end

graphs = OpenWFE::Trans::XPDL.parse ARGV[0]

tree = OpenWFE::Trans::StepCompiler.compile(graphs.first)

puts OpenWFE::ExpressionTree.to_s(tree, 3)


